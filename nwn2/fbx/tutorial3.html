<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>FreshLook</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="FreshLook" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="/nwn2/fbx/tutorial3.html" />
<meta property="og:url" content="/nwn2/fbx/tutorial3.html" />
<meta property="og:site_name" content="FreshLook" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="FreshLook" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"FreshLook","url":"/nwn2/fbx/tutorial3.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="FreshLook" />
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">FreshLook</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/nwn2/">NWN2</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <h1 id="tutorial-animated-placeable">Tutorial: Animated placeable</h1>

<p>In this tutorial we are going to take the banner of Tyr, which is a placeable
included in NWN2, and make it animated using MDK and Blender.</p>

<p><strong>Note</strong>: Similar instructions should be applicable to another computer
graphics program like 3ds Max or Maya. The key about MDK is that it works with
FBX, so it interoperates with any application that supports FBX.</p>

<h1 id="step-1-convert-the-mdb-to-fbx">Step 1: Convert the MDB to FBX</h1>

<ol>
  <li>Extract <strong>PLC_MC_TyrBanner.MDB</strong> from <strong>Data\NWN2_Models.zip</strong> located in
the NWN2 install directory.</li>
  <li>Drag and drop the MDB onto <strong>nw2fbx-dragdrop.cmd</strong>. This should give
<strong>PLC_MC_TyrBanner.fbx</strong> and automatically extract the textures used by the
models (<strong>PLC_MC_TyrBanner.dds</strong> and <strong>PLC_MC_TyrBanner_N.dds</strong>).</li>
</ol>

<h1 id="step-2-import-the-fbx-into-blender">Step 2: Import the FBX into Blender</h1>

<ol>
  <li>Open Blender.</li>
  <li>
    <p>Go to <strong>File</strong> &gt; <strong>Import</strong> &gt; <strong>FBX (.fbx)</strong></p>

    <p><img src="img/blender_import_fbx.png" alt="" /></p>
  </li>
  <li>For importing NWN2 models, the default import options should be fine.</li>
  <li>Navigate to the directory where <strong>PLC_MC_TyrBanner.fbx</strong> is located and
double-click it.</li>
</ol>

<h1 id="step-3-make-animation-pivot">Step 3: Make animation pivot</h1>

<p>MDK expects animations to be in local space (relative to a parent object) to
avoid problems with global transforms that may occur when importing/exporting
FBX. In order to do that, we must animated the model relative to a parent
object which the MDK calls the <strong>animation pivot</strong>.</p>

<ol>
  <li>Move the mouse cursor to the 3D view.</li>
  <li>
    <p>Press <strong>SHIFT+A</strong> and go to <strong>Empty</strong> &gt; <strong>Plain Axes</strong>.</p>

    <p><img src="img/blender_add_empty.png" alt="" /></p>
  </li>
  <li>
    <p>Look at the <strong>Outliner</strong> area to see the current scene objects:</p>

    <p><img src="img/blender_banner_empty_outliner.png" alt="" /></p>

    <p>We must name the empty object as the model we want to animate and append
“.PIVOT” to the end.</p>

    <p><img src="img/blender_banner_pivot_outliner.png" alt="" /></p>
  </li>
  <li>
    <p>Select the model by right-clicking it, now right-click the pivot while you
press the <strong>SHIFT</strong> key so you add it to the selection, press <strong>CTRL+P</strong> and
select <strong>Object</strong>.</p>

    <p><img src="img/blender_parent_object.png" alt="" /></p>
  </li>
</ol>

<h1 id="step-4-animate-the-model">Step 4: Animate the model</h1>

<p>Now animate the model (not the pivot!) as you wish.</p>

<h1 id="step-5-export-to-fbx">Step 5: Export to FBX</h1>

<ol>
  <li>
    <p>Go to <strong>File</strong> &gt; <strong>Export</strong> &gt; <strong>FBX (.fbx)</strong></p>

    <p><img src="img/blender_export_fbx.png" alt="" /></p>
  </li>
  <li>
    <p>In the Animation tab, check <strong>Baked Animation</strong> and uncheck the other options.</p>

    <p><img src="img/blender_export_fbx_animation.png" alt="" /></p>
  </li>
  <li>
    <p>Navigate to the directory where you want to export, double-click the file
you want to overwrite or type a file name and click <strong>Export FBX</strong>. In this
tutorial, we use the file <strong>tutorial.fbx</strong>.</p>
  </li>
</ol>

<h1 id="step-6-convert-fbx-to-nwn2">Step 6: Convert FBX to NWN2</h1>

<ol>
  <li>Drag and drop <strong>tutorial.fbx</strong> onto <strong>fbx2nw-dragdrop.cmd</strong>. This should
generate <strong>tutorial.MDB</strong>, <strong>tutorial.skel.gr2</strong> and <strong>tutorial.anim.gr2</strong>.</li>
  <li>Ignore the generated MDB: in order to animate an existing MDB, we don’t need
to modify it at all.</li>
  <li>Rename <strong>tutorial.skel.gr2</strong> to <strong>PLC_MC_TyrBanner.gr2</strong>.</li>
  <li>Rename <strong>tutorial.anim.gr2</strong> to <strong>PLC_MC_TyrBanner_idle.gr2</strong>.</li>
</ol>

<h1 id="step-7-edit-placeables2da">Step 7: Edit placeables.2da</h1>

<p>We have generated all the files we need, <strong>PLC_MC_TyrBanner.gr2</strong> and
<strong>PLC_MC_TyrBanner_idle.gr2</strong>, but now we must link the placeable to the
skeleton. To do that, you must edit the file <strong>placeables.2da</strong> and modify the
line of the placeable as follows:</p>

<ol>
  <li>Column <strong>PlaceableModelType</strong>: set to 2.</li>
  <li>Column <strong>NWN2_Skeleton</strong>: set to <strong>PLC_MC_TyrBanner</strong>.</li>
</ol>

<h1 id="final-words">Final words</h1>

<p>Video showing final result:
<a href="https://youtu.be/tB5HyjDmG0A">https://youtu.be/tB5HyjDmG0A</a></p>

<p>This tutorial explains the simplest case for animating a placeable. Future
tutorials may explain:</p>
<ul>
  <li>Animated multipart placeables.</li>
  <li>Animated placeable with several states: idle, open, …</li>
</ul>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p></p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
